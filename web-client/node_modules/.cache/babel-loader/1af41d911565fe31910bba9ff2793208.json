{"remainingRequest":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js!/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue","mtime":1597016519791},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js","mtime":1589656986733},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js","mtime":1597019925514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBTb2NrSlMgZnJvbSAnc29ja2pzLWNsaWVudCc7CmltcG9ydCBTdG9tcCBmcm9tICdzdG9tcGpzJzsKaW1wb3J0IENvcnJNYXRyaXggZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9tYXRyaXgudnVlJzsKaW1wb3J0IEFzc2V0cyBmcm9tICdAL2NvbXBvbmVudHMvcG9ydGZvbGlvL2Fzc2V0cy52dWUnOwppbXBvcnQgQWxsb2NhdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvcG9ydGZvbGlvL2FsbG9jYXRpb24udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwb3J0Zm9saW8nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJ1BvcnRmb2xpbyAnICsgdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBwb3J0Zm9saW86IHt9LAogICAgICBzdGF0dXM6ICdOT05FJwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgICdjb3JyLW1hdHJpeCc6IENvcnJNYXRyaXgsCiAgICAnYXNzZXRzJzogQXNzZXRzLAogICAgJ2FsbG9jYXRpb24nOiBBbGxvY2F0aW9uCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnBvcnRmb2xpb0lkID0gTnVtYmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICB2YXIgc29ja2V0ID0gbmV3IFNvY2tKUygnL3N0b21wJyk7CiAgICB0aGlzLmNsaWVudCA9IFN0b21wLm92ZXIoc29ja2V0KTsKICAgIHRoaXMuY2xpZW50LmRlYnVnID0gbnVsbDsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHRoaXMuY2xpZW50LmNvbm5lY3Qoe30sIGZ1bmN0aW9uIChmcmFtZSkgewogICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkOiAnICsgZnJhbWUpOwogICAgICBzZWxmLmNsaWVudC5zdWJzY3JpYmUoJy90b3BpYy9zb2x1dGlvbicsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UuYm9keSk7IC8vIGNvbnNvbGUubG9nKGRhdGEuc3RhdHVzKQoKICAgICAgICBpZiAoZGF0YS5pZCA9PT0gX3RoaXMucG9ydGZvbGlvSWQpIHsKICAgICAgICAgIHNlbGYuc3RhdHVzID0gZGF0YS5zdGF0dXM7CiAgICAgICAgICBzZWxmLnBvcnRmb2xpbyA9IGRhdGEucG9ydGZvbGlvOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIGF4aW9zLmdldCgiL2FwaS9wb3J0Zm9saW8vIi5jb25jYXQodGhpcy5wb3J0Zm9saW9JZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy5zdGF0dXMgPSByZXMuZGF0YS5zdGF0dXM7CiAgICAgIF90aGlzLnBvcnRmb2xpbyA9IHJlcy5kYXRhLmludmVzdG1lbnQ7CiAgICAgIF90aGlzLnRpdGxlID0gIlBvcnRmb2xpbyAiLmNvbmNhdChfdGhpcy5wb3J0Zm9saW8ubmFtZSk7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICB9KTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmNsaWVudC5kaXNjb25uZWN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VTdGF0dXM6IGZ1bmN0aW9uIGNoYW5nZVN0YXR1cyhuZXdTdGF0dXMpIHsKICAgICAgdGhpcy5zdGF0dXMgPSBuZXdTdGF0dXM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAiBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,MAAA,MAAA,eAAA;AACA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,UAAA,MAAA,mCAAA;AACA,OAAA,MAAA,MAAA,mCAAA;AACA,OAAA,UAAA,MAAA,uCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,eAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,UAAA,EAAA;AACA,mBAAA,UADA;AAEA,cAAA,MAFA;AAGA,kBAAA;AAHA,GATA;AAcA,EAAA,OAdA,qBAcA;AAAA;;AACA,SAAA,WAAA,GAAA,MAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA;AAEA,QAAA,MAAA,GAAA,IAAA,MAAA,CAAA,QAAA,CAAA;AACA,SAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,SAAA,MAAA,CAAA,OAAA,CAAA,EAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,KAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,SAAA,CAAA,iBAAA,EAAA,UAAA,OAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CADA,CAEA;;AACA,YAAA,IAAA,CAAA,EAAA,KAAA,KAAA,CAAA,WAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,IAAA,CAAA,MAAA;AACA,UAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA;AACA,OAPA;AAQA,KAVA;AAYA,IAAA,KAAA,CAAA,GAAA,0BAAA,KAAA,WAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,MAAA,KAAA,CAAA,KAAA,uBAAA,KAAA,CAAA,SAAA,CAAA,IAAA;AACA,KAJA,EAIA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,KANA;AAOA,GAxCA;AAyCA,EAAA,aAzCA,2BAyCA;AACA,SAAA,MAAA,CAAA,UAAA;AACA,GA3CA;AA4CA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,SADA,EACA;AACA,WAAA,MAAA,GAAA,SAAA;AACA;AAHA;AA5CA,CAAA","sourcesContent":["<template>\n  <b-card no-body>\n    <b-tabs card>\n      <b-tab title=\"Allocation\" active>\n        <allocation :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" @newStatus=\"changeStatus\" />\n      </b-tab>\n      <b-tab title=\"Info\">\n        <assets :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" />\n      </b-tab>\n      <b-tab title=\"Correlation Matrix\">\n        <corr-matrix :title=\"title\" :portfolio=\"portfolio\" />\n      </b-tab>\n    </b-tabs>\n  </b-card>\n</template>\n\n<script>\nimport axios from 'axios'\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\nimport CorrMatrix from '@/components/portfolio/matrix.vue'\nimport Assets from '@/components/portfolio/assets.vue'\nimport Allocation from '@/components/portfolio/allocation.vue'\n\nexport default {\n  name: 'portfolio',\n  data () {\n    return {\n      title: 'Portfolio ' + this.$route.params.id,\n      portfolio: {},\n      status: 'NONE'\n    }\n  },\n  components: {\n    'corr-matrix': CorrMatrix,\n    'assets': Assets,\n    'allocation': Allocation\n  },\n  created () {\n    this.portfolioId = Number(this.$route.params.id)\n\n    const socket = new SockJS('/stomp')\n    this.client = Stomp.over(socket)\n    this.client.debug = null\n    let self = this\n    this.client.connect({}, frame => {\n      console.log('Connected: ' + frame)\n      self.client.subscribe('/topic/solution', message => {\n        const data = JSON.parse(message.body)\n        // console.log(data.status)\n        if (data.id === this.portfolioId) {\n          self.status = data.status\n          self.portfolio = data.portfolio\n        }\n      })\n    })\n\n    axios.get(`/api/portfolio/${this.portfolioId}`).then(res => {\n      this.status = res.data.status\n      this.portfolio = res.data.investment\n      this.title = `Portfolio ${this.portfolio.name}`\n    }, error => {\n      console.error(error)\n    })\n  },\n  beforeDestroy () {\n    this.client.disconnect()\n  },\n  methods: {\n    changeStatus (newStatus) {\n      this.status = newStatus\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/pages/portfolio"}]}