{"remainingRequest":"/home/thiago/Projects/code/opta-invest/client/node_modules/thread-loader/dist/cjs.js!/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js!/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue","mtime":1597281106684},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/thread-loader/dist/cjs.js","mtime":1589656986772},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js","mtime":1589656986733},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js","mtime":1597019925514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBTb2NrSlMgZnJvbSAnc29ja2pzLWNsaWVudCc7CmltcG9ydCBTdG9tcCBmcm9tICdzdG9tcGpzJzsKaW1wb3J0IENvcnJNYXRyaXggZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9tYXRyaXgudnVlJzsKaW1wb3J0IEFzc2V0cyBmcm9tICdAL2NvbXBvbmVudHMvcG9ydGZvbGlvL2Fzc2V0cy52dWUnOwppbXBvcnQgQWxsb2NhdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvcG9ydGZvbGlvL2FsbG9jYXRpb24udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwb3J0Zm9saW8nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJ1BvcnRmb2xpbyAnICsgdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBwb3J0Zm9saW86IHt9LAogICAgICBzdGF0dXM6ICdOT1RfU09MVklORycKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAnY29yci1tYXRyaXgnOiBDb3JyTWF0cml4LAogICAgJ2Fzc2V0cyc6IEFzc2V0cywKICAgICdhbGxvY2F0aW9uJzogQWxsb2NhdGlvbgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5wb3J0Zm9saW9JZCA9IE51bWJlcih0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgdmFyIHNvY2tldCA9IG5ldyBTb2NrSlMoJy9zdG9tcCcpOwogICAgdGhpcy5jbGllbnQgPSBTdG9tcC5vdmVyKHNvY2tldCk7CiAgICB0aGlzLmNsaWVudC5kZWJ1ZyA9IG51bGw7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB0aGlzLmNsaWVudC5jb25uZWN0KHt9LCBmdW5jdGlvbiAoZnJhbWUpIHsKICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZDogJyArIGZyYW1lKTsKICAgICAgc2VsZi5jbGllbnQuc3Vic2NyaWJlKCcvdG9waWMvc29sdXRpb24nLCBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlLmJvZHkpOyAvLyBjb25zb2xlLmxvZyhkYXRhLnN0YXR1cykKCiAgICAgICAgaWYgKGRhdGEuaWQgPT09IF90aGlzLnBvcnRmb2xpb0lkKSB7CiAgICAgICAgICBzZWxmLnN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICAgICAgc2VsZi5wb3J0Zm9saW8gPSBkYXRhLnBvcnRmb2xpbzsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICBheGlvcy5nZXQoIi9hcGkvcG9ydGZvbGlvLyIuY29uY2F0KHRoaXMucG9ydGZvbGlvSWQpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuc3RhdHVzID0gcmVzLmRhdGEuc3RhdHVzOwogICAgICBfdGhpcy5wb3J0Zm9saW8gPSByZXMuZGF0YS5pbnZlc3RtZW50OwogICAgICBfdGhpcy50aXRsZSA9ICJQb3J0Zm9saW8gIi5jb25jYXQoX3RoaXMucG9ydGZvbGlvLm5hbWUpOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5jbGllbnQuZGlzY29ubmVjdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlU3RhdHVzOiBmdW5jdGlvbiBjaGFuZ2VTdGF0dXMobmV3U3RhdHVzKSB7CiAgICAgIHRoaXMuc3RhdHVzID0gbmV3U3RhdHVzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAiBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,MAAA,MAAA,eAAA;AACA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,UAAA,MAAA,mCAAA;AACA,OAAA,MAAA,MAAA,mCAAA;AACA,OAAA,UAAA,MAAA,uCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,eAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,UAAA,EAAA;AACA,mBAAA,UADA;AAEA,cAAA,MAFA;AAGA,kBAAA;AAHA,GATA;AAcA,EAAA,OAdA,qBAcA;AAAA;;AACA,SAAA,WAAA,GAAA,MAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA;AAEA,QAAA,MAAA,GAAA,IAAA,MAAA,CAAA,QAAA,CAAA;AACA,SAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,SAAA,MAAA,CAAA,OAAA,CAAA,EAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,KAAA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,SAAA,CAAA,iBAAA,EAAA,UAAA,OAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,CADA,CAEA;;AACA,YAAA,IAAA,CAAA,EAAA,KAAA,KAAA,CAAA,WAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,IAAA,CAAA,MAAA;AACA,UAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA;AACA,OAPA;AAQA,KAVA;AAYA,IAAA,KAAA,CAAA,GAAA,0BAAA,KAAA,WAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,MAAA,KAAA,CAAA,KAAA,uBAAA,KAAA,CAAA,SAAA,CAAA,IAAA;AACA,KAJA,EAIA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,KANA;AAOA,GAxCA;AAyCA,EAAA,aAzCA,2BAyCA;AACA,SAAA,MAAA,CAAA,UAAA;AACA,GA3CA;AA4CA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,SADA,EACA;AACA,WAAA,MAAA,GAAA,SAAA;AACA;AAHA;AA5CA,CAAA","sourcesContent":["<template>\n  <b-card no-body>\n    <b-tabs card>\n      <b-tab title=\"Allocation\" active>\n        <allocation :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" @newStatus=\"changeStatus\" />\n      </b-tab>\n      <b-tab title=\"Info\">\n        <assets :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" />\n      </b-tab>\n      <b-tab title=\"Correlation Matrix\">\n        <corr-matrix :title=\"title\" :portfolio=\"portfolio\" />\n      </b-tab>\n    </b-tabs>\n  </b-card>\n</template>\n\n<script>\nimport axios from 'axios'\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\nimport CorrMatrix from '@/components/portfolio/matrix.vue'\nimport Assets from '@/components/portfolio/assets.vue'\nimport Allocation from '@/components/portfolio/allocation.vue'\n\nexport default {\n  name: 'portfolio',\n  data () {\n    return {\n      title: 'Portfolio ' + this.$route.params.id,\n      portfolio: {},\n      status: 'NOT_SOLVING'\n    }\n  },\n  components: {\n    'corr-matrix': CorrMatrix,\n    'assets': Assets,\n    'allocation': Allocation\n  },\n  created () {\n    this.portfolioId = Number(this.$route.params.id)\n\n    const socket = new SockJS('/stomp')\n    this.client = Stomp.over(socket)\n    this.client.debug = null\n    let self = this\n    this.client.connect({}, frame => {\n      console.log('Connected: ' + frame)\n      self.client.subscribe('/topic/solution', message => {\n        const data = JSON.parse(message.body)\n        // console.log(data.status)\n        if (data.id === this.portfolioId) {\n          self.status = data.status\n          self.portfolio = data.portfolio\n        }\n      })\n    })\n\n    axios.get(`/api/portfolio/${this.portfolioId}`).then(res => {\n      this.status = res.data.status\n      this.portfolio = res.data.investment\n      this.title = `Portfolio ${this.portfolio.name}`\n    }, error => {\n      console.error(error)\n    })\n  },\n  beforeDestroy () {\n    this.client.disconnect()\n  },\n  methods: {\n    changeStatus (newStatus) {\n      this.status = newStatus\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/pages/portfolio"}]}