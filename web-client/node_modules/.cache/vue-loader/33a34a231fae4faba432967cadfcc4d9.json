{"remainingRequest":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thiago/Projects/code/opta-invest/client/src/components/portfolio/assets.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thiago/Projects/code/opta-invest/client/src/components/portfolio/assets.vue","mtime":1597275638562},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js","mtime":1589656986733},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js","mtime":1597019925514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYXNzZXRzJywKICBwcm9wczogWyd0aXRsZScsICdwb3J0Zm9saW8nLCAnc3RhdHVzJ10sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBmaWVsZHM6IFsnaWQnLCAnbmFtZScsICdxdWFudGl0eSddCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc29sdmluZyAoKSB7CiAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ1NPTFZJTkdfQUNUSVZFJwogICAgfSwKICAgIHJlZ2lvbnMgKCkgewogICAgICByZXR1cm4gKHRoaXMucG9ydGZvbGlvID8gdGhpcy5wb3J0Zm9saW8ucmVnaW9uTGlzdCB8fCBbXSA6IFtdKS5tYXAoZSA9PiB7IGUucXVhbnRpdHkgPSBlLnF1YW50aXR5TWlsbGlzTWF4aW11bSAvIDEwOyByZXR1cm4gZSB9KQogICAgfSwKICAgIHNlY3RvcnMgKCkgewogICAgICByZXR1cm4gKHRoaXMucG9ydGZvbGlvID8gdGhpcy5wb3J0Zm9saW8uc2VjdG9yTGlzdCB8fCBbXSA6IFtdKS5tYXAoZSA9PiB7IGUucXVhbnRpdHkgPSBlLnF1YW50aXR5TWlsbGlzTWF4aW11bSAvIDEwOyByZXR1cm4gZSB9KQogICAgfSwKICAgIGFzc2V0cyAoKSB7CiAgICAgIGNvbnN0IHJlZ2lvbnNJZCA9IHRoaXMucmVnaW9ucy5yZWR1Y2UoKGFjYywgZSkgPT4geyBhY2NbZS5pZF0gPSBlOyByZXR1cm4gYWNjIH0sIHt9KQogICAgICBjb25zdCBzZWN0b3JzSWQgPSB0aGlzLnNlY3RvcnMucmVkdWNlKChhY2MsIGUpID0+IHsgYWNjW2UuaWRdID0gZTsgcmV0dXJuIGFjYyB9LCB7fSkKCiAgICAgIGNvbnN0IGFzc2V0c0xpc3QgPSB0aGlzLnBvcnRmb2xpbyA/IHRoaXMucG9ydGZvbGlvLmFzc2V0Q2xhc3NMaXN0IHx8IFtdIDogW10KICAgICAgcmV0dXJuIGFzc2V0c0xpc3QubWFwKGUgPT4gKHsKICAgICAgICBpZDogZS5pZCwKICAgICAgICBuYW1lOiBlLm5hbWUsCiAgICAgICAgcmVnaW9uOiByZWdpb25zSWRbZS5yZWdpb25JZF0ubmFtZSwKICAgICAgICBzZWN0b3I6IHNlY3RvcnNJZFtlLnNlY3RvcklkXS5uYW1lLAogICAgICAgIGV4cGVjdGVkUmV0dXJuTGFiZWw6IGUuZXhwZWN0ZWRSZXR1cm5MYWJlbCwKICAgICAgICBzdGFuZGFyZERldmlhdGlvblJpc2tMYWJlbDogZS5zdGFuZGFyZERldmlhdGlvblJpc2tMYWJlbH0pKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcmVnaW9uQ2hhbmdlIChpZHgpIHsKICAgICAgY29uc3QgYXV4ID0gcGFyc2VGbG9hdCh0aGlzLnJlZ2lvbnNbaWR4XS5xdWFudGl0eSkKICAgICAgY29uc3QgcXR5ID0gTWF0aC5tYXgoTWF0aC5taW4oaXNOYU4oYXV4KSA/IDAuMCA6IGF1eCwgMTAwLjApLCAwLjApCiAgICAgIHRoaXMucG9ydGZvbGlvLnJlZ2lvbkxpc3RbaWR4XS5xdWFudGl0eU1pbGxpc01heGltdW0gPSBxdHkgKiAxMAogICAgICB0aGlzLnBvcnRmb2xpby5yZWdpb25MaXN0W2lkeF0ucXVhbnRpdHlNYXhpbXVtTGFiZWwgPSBgJHtxdHl9JWAKICAgIH0sCiAgICBzZWN0b3JDaGFuZ2UgKGlkeCkgewogICAgICBjb25zdCBhdXggPSBwYXJzZUZsb2F0KHRoaXMuc2VjdG9yc1tpZHhdLnF1YW50aXR5KQogICAgICBjb25zdCBxdHkgPSBNYXRoLm1heChNYXRoLm1pbihpc05hTihhdXgpID8gMC4wIDogYXV4LCAxMDAuMCksIDAuMCkKICAgICAgdGhpcy5wb3J0Zm9saW8uc2VjdG9yTGlzdFtpZHhdLnF1YW50aXR5TWlsbGlzTWF4aW11bSA9IHF0eSAqIDEwCiAgICAgIHRoaXMucG9ydGZvbGlvLnNlY3Rvckxpc3RbaWR4XS5xdWFudGl0eU1heGltdW1MYWJlbCA9IGAke3F0eX0lYAogICAgfQogIH0KfQo="},{"version":3,"sources":["assets.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"assets.vue","sourceRoot":"src/components/portfolio","sourcesContent":["<template>\n  <div id=\"assets\">\n    <b-row>\n      <h1>{{ title }}</h1>\n    </b-row>\n    <b-row>\n      <b-col cols=\"6\">\n        <b-table striped hover :items=\"regions\" :fields=\"fields\">\n          <template slot=\"quantity\" slot-scope=\"row\">\n            <b-input-group size=\"sm\" append=\"%\">\n              <b-form-input id=\"region-std\" v-model.number=\"row.item.quantity\" type=\"number\" @change=\"regionChange(row.index)\" :disabled=\"solving\"/>\n            </b-input-group>\n          </template>\n        </b-table>\n      </b-col>\n      <b-col cols=\"6\">\n        <b-table striped hover :items=\"sectors\" :fields=\"fields\">\n          <template slot=\"quantity\" slot-scope=\"row\">\n            <b-input-group size=\"sm\" append=\"%\">\n              <b-form-input id=\"sector-std\" v-model.trim=\"row.item.quantity\" type=\"number\" @change=\"sectorChange(row.index)\" :disabled=\"solving\"/>\n            </b-input-group>\n          </template>\n        </b-table>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <b-table striped hover :items=\"assets\"></b-table>\n      </b-col>\n    </b-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'assets',\n  props: ['title', 'portfolio', 'status'],\n  data () {\n    return {\n      fields: ['id', 'name', 'quantity']\n    }\n  },\n  computed: {\n    solving () {\n      return this.status === 'SOLVING_ACTIVE'\n    },\n    regions () {\n      return (this.portfolio ? this.portfolio.regionList || [] : []).map(e => { e.quantity = e.quantityMillisMaximum / 10; return e })\n    },\n    sectors () {\n      return (this.portfolio ? this.portfolio.sectorList || [] : []).map(e => { e.quantity = e.quantityMillisMaximum / 10; return e })\n    },\n    assets () {\n      const regionsId = this.regions.reduce((acc, e) => { acc[e.id] = e; return acc }, {})\n      const sectorsId = this.sectors.reduce((acc, e) => { acc[e.id] = e; return acc }, {})\n\n      const assetsList = this.portfolio ? this.portfolio.assetClassList || [] : []\n      return assetsList.map(e => ({\n        id: e.id,\n        name: e.name,\n        region: regionsId[e.regionId].name,\n        sector: sectorsId[e.sectorId].name,\n        expectedReturnLabel: e.expectedReturnLabel,\n        standardDeviationRiskLabel: e.standardDeviationRiskLabel}))\n    }\n  },\n  methods: {\n    regionChange (idx) {\n      const aux = parseFloat(this.regions[idx].quantity)\n      const qty = Math.max(Math.min(isNaN(aux) ? 0.0 : aux, 100.0), 0.0)\n      this.portfolio.regionList[idx].quantityMillisMaximum = qty * 10\n      this.portfolio.regionList[idx].quantityMaximumLabel = `${qty}%`\n    },\n    sectorChange (idx) {\n      const aux = parseFloat(this.sectors[idx].quantity)\n      const qty = Math.max(Math.min(isNaN(aux) ? 0.0 : aux, 100.0), 0.0)\n      this.portfolio.sectorList[idx].quantityMillisMaximum = qty * 10\n      this.portfolio.sectorList[idx].quantityMaximumLabel = `${qty}%`\n    }\n  }\n}\n</script>"]}]}