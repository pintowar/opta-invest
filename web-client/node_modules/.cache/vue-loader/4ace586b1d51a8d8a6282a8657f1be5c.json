{"remainingRequest":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue","mtime":1597016519791},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js","mtime":1589656986733},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js","mtime":1597019925514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IFNvY2tKUyBmcm9tICdzb2NranMtY2xpZW50JwppbXBvcnQgU3RvbXAgZnJvbSAnc3RvbXBqcycKaW1wb3J0IENvcnJNYXRyaXggZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9tYXRyaXgudnVlJwppbXBvcnQgQXNzZXRzIGZyb20gJ0AvY29tcG9uZW50cy9wb3J0Zm9saW8vYXNzZXRzLnZ1ZScKaW1wb3J0IEFsbG9jYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9hbGxvY2F0aW9uLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncG9ydGZvbGlvJywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAnUG9ydGZvbGlvICcgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgIHBvcnRmb2xpbzoge30sCiAgICAgIHN0YXR1czogJ05PTkUnCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAnY29yci1tYXRyaXgnOiBDb3JyTWF0cml4LAogICAgJ2Fzc2V0cyc6IEFzc2V0cywKICAgICdhbGxvY2F0aW9uJzogQWxsb2NhdGlvbgogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLnBvcnRmb2xpb0lkID0gTnVtYmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKCiAgICBjb25zdCBzb2NrZXQgPSBuZXcgU29ja0pTKCcvc3RvbXAnKQogICAgdGhpcy5jbGllbnQgPSBTdG9tcC5vdmVyKHNvY2tldCkKICAgIHRoaXMuY2xpZW50LmRlYnVnID0gbnVsbAogICAgbGV0IHNlbGYgPSB0aGlzCiAgICB0aGlzLmNsaWVudC5jb25uZWN0KHt9LCBmcmFtZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQ6ICcgKyBmcmFtZSkKICAgICAgc2VsZi5jbGllbnQuc3Vic2NyaWJlKCcvdG9waWMvc29sdXRpb24nLCBtZXNzYWdlID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlLmJvZHkpCiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5zdGF0dXMpCiAgICAgICAgaWYgKGRhdGEuaWQgPT09IHRoaXMucG9ydGZvbGlvSWQpIHsKICAgICAgICAgIHNlbGYuc3RhdHVzID0gZGF0YS5zdGF0dXMKICAgICAgICAgIHNlbGYucG9ydGZvbGlvID0gZGF0YS5wb3J0Zm9saW8KICAgICAgICB9CiAgICAgIH0pCiAgICB9KQoKICAgIGF4aW9zLmdldChgL2FwaS9wb3J0Zm9saW8vJHt0aGlzLnBvcnRmb2xpb0lkfWApLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5zdGF0dXMgPSByZXMuZGF0YS5zdGF0dXMKICAgICAgdGhpcy5wb3J0Zm9saW8gPSByZXMuZGF0YS5pbnZlc3RtZW50CiAgICAgIHRoaXMudGl0bGUgPSBgUG9ydGZvbGlvICR7dGhpcy5wb3J0Zm9saW8ubmFtZX1gCiAgICB9LCBlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpCiAgICB9KQogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7CiAgICB0aGlzLmNsaWVudC5kaXNjb25uZWN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVN0YXR1cyAobmV3U3RhdHVzKSB7CiAgICAgIHRoaXMuc3RhdHVzID0gbmV3U3RhdHVzCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show.vue","sourceRoot":"src/pages/portfolio","sourcesContent":["<template>\n  <b-card no-body>\n    <b-tabs card>\n      <b-tab title=\"Allocation\" active>\n        <allocation :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" @newStatus=\"changeStatus\" />\n      </b-tab>\n      <b-tab title=\"Info\">\n        <assets :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" />\n      </b-tab>\n      <b-tab title=\"Correlation Matrix\">\n        <corr-matrix :title=\"title\" :portfolio=\"portfolio\" />\n      </b-tab>\n    </b-tabs>\n  </b-card>\n</template>\n\n<script>\nimport axios from 'axios'\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\nimport CorrMatrix from '@/components/portfolio/matrix.vue'\nimport Assets from '@/components/portfolio/assets.vue'\nimport Allocation from '@/components/portfolio/allocation.vue'\n\nexport default {\n  name: 'portfolio',\n  data () {\n    return {\n      title: 'Portfolio ' + this.$route.params.id,\n      portfolio: {},\n      status: 'NONE'\n    }\n  },\n  components: {\n    'corr-matrix': CorrMatrix,\n    'assets': Assets,\n    'allocation': Allocation\n  },\n  created () {\n    this.portfolioId = Number(this.$route.params.id)\n\n    const socket = new SockJS('/stomp')\n    this.client = Stomp.over(socket)\n    this.client.debug = null\n    let self = this\n    this.client.connect({}, frame => {\n      console.log('Connected: ' + frame)\n      self.client.subscribe('/topic/solution', message => {\n        const data = JSON.parse(message.body)\n        // console.log(data.status)\n        if (data.id === this.portfolioId) {\n          self.status = data.status\n          self.portfolio = data.portfolio\n        }\n      })\n    })\n\n    axios.get(`/api/portfolio/${this.portfolioId}`).then(res => {\n      this.status = res.data.status\n      this.portfolio = res.data.investment\n      this.title = `Portfolio ${this.portfolio.name}`\n    }, error => {\n      console.error(error)\n    })\n  },\n  beforeDestroy () {\n    this.client.disconnect()\n  },\n  methods: {\n    changeStatus (newStatus) {\n      this.status = newStatus\n    }\n  }\n}\n</script>\n"]}]}