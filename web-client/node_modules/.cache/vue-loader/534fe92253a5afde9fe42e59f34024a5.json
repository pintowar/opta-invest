{"remainingRequest":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/thiago/Projects/code/opta-invest/client/src/pages/portfolio/show.vue","mtime":1597281106684},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/babel-loader/lib/index.js","mtime":1589656986733},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/cache-loader/dist/cjs.js","mtime":1589656986742},{"path":"/home/thiago/Projects/code/opta-invest/client/node_modules/vue-loader/lib/index.js","mtime":1597019925514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IFNvY2tKUyBmcm9tICdzb2NranMtY2xpZW50JwppbXBvcnQgU3RvbXAgZnJvbSAnc3RvbXBqcycKaW1wb3J0IENvcnJNYXRyaXggZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9tYXRyaXgudnVlJwppbXBvcnQgQXNzZXRzIGZyb20gJ0AvY29tcG9uZW50cy9wb3J0Zm9saW8vYXNzZXRzLnZ1ZScKaW1wb3J0IEFsbG9jYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL3BvcnRmb2xpby9hbGxvY2F0aW9uLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncG9ydGZvbGlvJywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAnUG9ydGZvbGlvICcgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgIHBvcnRmb2xpbzoge30sCiAgICAgIHN0YXR1czogJ05PVF9TT0xWSU5HJwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgJ2NvcnItbWF0cml4JzogQ29yck1hdHJpeCwKICAgICdhc3NldHMnOiBBc3NldHMsCiAgICAnYWxsb2NhdGlvbic6IEFsbG9jYXRpb24KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5wb3J0Zm9saW9JZCA9IE51bWJlcih0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCgogICAgY29uc3Qgc29ja2V0ID0gbmV3IFNvY2tKUygnL3N0b21wJykKICAgIHRoaXMuY2xpZW50ID0gU3RvbXAub3Zlcihzb2NrZXQpCiAgICB0aGlzLmNsaWVudC5kZWJ1ZyA9IG51bGwKICAgIGxldCBzZWxmID0gdGhpcwogICAgdGhpcy5jbGllbnQuY29ubmVjdCh7fSwgZnJhbWUgPT4gewogICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkOiAnICsgZnJhbWUpCiAgICAgIHNlbGYuY2xpZW50LnN1YnNjcmliZSgnL3RvcGljL3NvbHV0aW9uJywgbWVzc2FnZSA9PiB7CiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZS5ib2R5KQogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEuc3RhdHVzKQogICAgICAgIGlmIChkYXRhLmlkID09PSB0aGlzLnBvcnRmb2xpb0lkKSB7CiAgICAgICAgICBzZWxmLnN0YXR1cyA9IGRhdGEuc3RhdHVzCiAgICAgICAgICBzZWxmLnBvcnRmb2xpbyA9IGRhdGEucG9ydGZvbGlvCiAgICAgICAgfQogICAgICB9KQogICAgfSkKCiAgICBheGlvcy5nZXQoYC9hcGkvcG9ydGZvbGlvLyR7dGhpcy5wb3J0Zm9saW9JZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMuc3RhdHVzID0gcmVzLmRhdGEuc3RhdHVzCiAgICAgIHRoaXMucG9ydGZvbGlvID0gcmVzLmRhdGEuaW52ZXN0bWVudAogICAgICB0aGlzLnRpdGxlID0gYFBvcnRmb2xpbyAke3RoaXMucG9ydGZvbGlvLm5hbWV9YAogICAgfSwgZXJyb3IgPT4gewogICAgICBjb25zb2xlLmVycm9yKGVycm9yKQogICAgfSkKICB9LAogIGJlZm9yZURlc3Ryb3kgKCkgewogICAgdGhpcy5jbGllbnQuZGlzY29ubmVjdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VTdGF0dXMgKG5ld1N0YXR1cykgewogICAgICB0aGlzLnN0YXR1cyA9IG5ld1N0YXR1cwogICAgfQogIH0KfQo="},{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"show.vue","sourceRoot":"src/pages/portfolio","sourcesContent":["<template>\n  <b-card no-body>\n    <b-tabs card>\n      <b-tab title=\"Allocation\" active>\n        <allocation :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" @newStatus=\"changeStatus\" />\n      </b-tab>\n      <b-tab title=\"Info\">\n        <assets :title=\"title\" :portfolio=\"portfolio\" :status=\"status\" />\n      </b-tab>\n      <b-tab title=\"Correlation Matrix\">\n        <corr-matrix :title=\"title\" :portfolio=\"portfolio\" />\n      </b-tab>\n    </b-tabs>\n  </b-card>\n</template>\n\n<script>\nimport axios from 'axios'\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\nimport CorrMatrix from '@/components/portfolio/matrix.vue'\nimport Assets from '@/components/portfolio/assets.vue'\nimport Allocation from '@/components/portfolio/allocation.vue'\n\nexport default {\n  name: 'portfolio',\n  data () {\n    return {\n      title: 'Portfolio ' + this.$route.params.id,\n      portfolio: {},\n      status: 'NOT_SOLVING'\n    }\n  },\n  components: {\n    'corr-matrix': CorrMatrix,\n    'assets': Assets,\n    'allocation': Allocation\n  },\n  created () {\n    this.portfolioId = Number(this.$route.params.id)\n\n    const socket = new SockJS('/stomp')\n    this.client = Stomp.over(socket)\n    this.client.debug = null\n    let self = this\n    this.client.connect({}, frame => {\n      console.log('Connected: ' + frame)\n      self.client.subscribe('/topic/solution', message => {\n        const data = JSON.parse(message.body)\n        // console.log(data.status)\n        if (data.id === this.portfolioId) {\n          self.status = data.status\n          self.portfolio = data.portfolio\n        }\n      })\n    })\n\n    axios.get(`/api/portfolio/${this.portfolioId}`).then(res => {\n      this.status = res.data.status\n      this.portfolio = res.data.investment\n      this.title = `Portfolio ${this.portfolio.name}`\n    }, error => {\n      console.error(error)\n    })\n  },\n  beforeDestroy () {\n    this.client.disconnect()\n  },\n  methods: {\n    changeStatus (newStatus) {\n      this.status = newStatus\n    }\n  }\n}\n</script>\n"]}]}